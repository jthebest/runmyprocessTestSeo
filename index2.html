<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Metaetiquetas SEO Básicas -->
    <title>Tienda Tech - Productos Electrónicos</title>
    <meta name="description" content="Encuentra los mejores productos electrónicos: auriculares, teclados, mouse y monitores al mejor precio">
    <link rel="canonical" href="https://tienda-tech.com/productos">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Tienda Tech - Productos Electrónicos">
    <meta property="og:description" content="Productos electrónicos de calidad: auriculares, teclados y más">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://tienda-tech.com/og-image.jpg">
    <meta property="og:url" content="https://tienda-tech.com/productos">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Tienda Tech - Productos Electrónicos">
    <meta name="twitter:description" content="Productos electrónicos de calidad">
    <meta name="twitter:image" content="https://tienda-tech.com/twitter-image.jpg">
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "name": "Productos Electrónicos",
        "description": "Lista de productos electrónicos disponibles",
        "url": "https://tienda-tech.com/productos",
        "numberOfItems": 4,
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "item": {
                    "@type": "Product",
                    "name": "Auriculares Wave",
                    "description": "Auriculares inalámbricos con cancelación de ruido",
                    "offers": {
                        "@type": "Offer",
                        "price": "59.90",
                        "priceCurrency": "USD"
                    }
                }
            },
            {
                "@type": "ListItem",
                "position": 2,
                "item": {
                    "@type": "Product",
                    "name": "Teclado Luna",
                    "description": "Teclado mecánico compacto con switches rojos",
                    "offers": {
                        "@type": "Offer",
                        "price": "89.00",
                        "priceCurrency": "USD"
                    }
                }
            },
            {
                "@type": "ListItem",
                "position": 3,
                "item": {
                    "@type": "Product",
                    "name": "Mouse Orion",
                    "description": "Mouse ergonómico de alta precisión",
                    "offers": {
                        "@type": "Offer",
                        "price": "39.50",
                        "priceCurrency": "USD"
                    }
                }
            }
        ]
    }
    </script>
    
    <style>
        :root {
            --primary-color: #2563eb;
            --text-color: #1f2937;
            --bg-color: #ffffff;
            --card-bg: #f8fafc;
            --border-color: #e5e7eb;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text-color: #f9fafb;
                --bg-color: #111827;
                --card-bg: #1f2937;
                --border-color: #374151;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--primary-color);
            color: white;
            padding: 8px;
            text-decoration: none;
            border-radius: 4px;
            z-index: 1000;
        }

        .skip-link:focus {
            top: 6px;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .search-container {
            max-width: 500px;
            margin: 0 auto 2rem;
        }

        .search-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .search-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            background: var(--bg-color);
            color: var(--text-color);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .status-message {
            text-align: center;
            margin: 1rem 0;
            min-height: 24px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .product-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            transition: transform 0.2s;
        }

        .product-card:hover {
            transform: translateY(-2px);
        }

        .product-name {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .product-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .product-description {
            color: var(--text-color);
            opacity: 0.8;
        }

        .no-results {
            text-align: center;
            padding: 3rem;
            grid-column: 1 / -1;
        }

        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Enlace para saltar al contenido (accesibilidad) -->
    <a href="#main-content" class="skip-link">Saltar al contenido principal</a>

    <header>
        <h1>Tienda Tech</h1>
        <p>Encuentra los mejores productos electrónicos</p>
    </header>

    <main id="main-content">
        <div class="search-container">
            <label for="search-input" class="search-label">
                Buscar productos:
            </label>
            <input 
                type="text" 
                id="search-input" 
                class="search-input" 
                placeholder="Escribe para buscar productos..."
                aria-describedby="search-help"
            >
            <div id="search-help" class="visually-hidden">
                Busca productos por nombre o descripción. Los resultados se actualizarán automáticamente.
            </div>
        </div>

        <!-- Mensaje de estado accesible -->
        <div 
            id="status-message" 
            class="status-message" 
            aria-live="polite" 
            aria-atomic="true"
        >
            Mostrando todos los productos
        </div>

        <!-- Lista de productos -->
        <div 
            id="products-container" 
            class="products-grid" 
            role="list"
            aria-label="Lista de productos"
        >
            <!-- Los productos se cargan dinámicamente aquí -->
        </div>
    </main>

    <script>
        // Datos de productos
        const productos = [
            {
                id: 1,
                nombre: "Auriculares Wave",
                precio: 59.9,
                descripcion: "Auriculares inalámbricos con cancelación de ruido."
            },
            {
                id: 2,
                nombre: "Teclado Luna",
                precio: 89.0,
                descripcion: "Teclado mecánico compacto con switches rojos."
            },
            {
                id: 3,
                nombre: "Mouse Orion",
                precio: 39.5,
                descripcion: "Mouse ergonómico de alta precisión."
            },
            {
                id: 4,
                nombre: "Monitor Vega 24”",
                precio: 139.0,
                descripcion: "Monitor IPS 1080p con baja latencia y 75Hz."
            }
        ];

        // Referencias a elementos DOM
        const $searchInput = document.getElementById('search-input');
        const $productsContainer = document.getElementById('products-container');
        const $statusMessage = document.getElementById('status-message');

        // Clave para localStorage
        const STORAGE_KEY = 'ultima-busqueda';

        /**
         * Normaliza texto para búsqueda insensible a mayúsculas y acentos
         */
        function normalizarTexto(texto) {
            return texto
                .toLowerCase()
                .normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '');
        }

        /**
         * Renderiza la lista de productos en el DOM
         */
        function renderizarProductos(productos) {
            $productsContainer.innerHTML = '';

            if (productos.length === 0) {
                $productsContainer.innerHTML = `
                    <div class="no-results" role="status">
                        <p>No se encontraron productos que coincidan con tu búsqueda.</p>
                    </div>
                `;
                return;
            }

            const fragment = document.createDocumentFragment();

            productos.forEach(producto => {
                const productCard = document.createElement('article');
                productCard.className = 'product-card';
                productCard.setAttribute('role', 'listitem');
                
                productCard.innerHTML = `
                    <h3 class="product-name">${producto.nombre}</h3>
                    <div class="product-price">$${producto.precio.toFixed(2)}</div>
                    <p class="product-description">${producto.descripcion}</p>
                `;

                fragment.appendChild(productCard);
            });

            $productsContainer.appendChild(fragment);
        }

        /**
         * Filtra productos basado en el término de búsqueda
         */
        function filtrarProductos() {
            const termino = $searchInput.value.trim();
            const terminoNormalizado = normalizarTexto(termino);

            // Guardar en localStorage
            localStorage.setItem(STORAGE_KEY, termino);

            if (!terminoNormalizado) {
                renderizarProductos(productos);
                $statusMessage.textContent = `Mostrando todos los productos (${productos.length})`;
                return;
            }

            const productosFiltrados = productos.filter(producto => {
                const textoBusqueda = normalizarTexto(producto.nombre + ' ' + producto.descripcion);
                return textoBusqueda.includes(terminoNormalizado);
            });

            renderizarProductos(productosFiltrados);
            
            // Actualizar mensaje de estado
            if (productosFiltrados.length === 0) {
                $statusMessage.textContent = `No se encontraron resultados para "${termino}"`;
            } else {
                $statusMessage.textContent = 
                    `Encontrados ${productosFiltrados.length} producto(s) para "${termino}"`;
            }
        }

        /**
         * Inicializa la aplicación
         */
        function inicializar() {
            // Cargar última búsqueda desde localStorage
            const ultimaBusqueda = localStorage.getItem(STORAGE_KEY);
            if (ultimaBusqueda) {
                $searchInput.value = ultimaBusqueda;
            }

            // Renderizar productos iniciales
            renderizarProductos(productos);
            $statusMessage.textContent = `Mostrando todos los productos (${productos.length})`;

            // Configurar event listeners
            $searchInput.addEventListener('input', filtrarProductos);
            
            // Navegación por teclado
            $searchInput.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    this.value = '';
                    filtrarProductos();
                }
            });

            // Enfocar el input de búsqueda al cargar
            $searchInput.focus();
        }

        // Inicializar la aplicación cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', inicializar);
    </script>
</body>
</html>